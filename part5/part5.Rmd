---
title: 'Supplemental: bind'
author: "you"
date: "5/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Learning Objectives

- **Learn** and apply `bind_rows()` to combine rows from two or more datasets
- **Standardize** and apply variable names using `clean_names()`


## Getting set up

```{r}
library(tidyverse)
library(readxl)
library(janitor)
```


Imagine that your lab is part of a large consortium studying the effects of smoking. As the lead data scientist, you've helped oversee the collection and documentation several observations for many variables of interest.

Many labs within the consortium have accumulated data...

```{r}
smoke_1 <- read_excel('data/smoke_1.xlsx', 
                      sheet=1, 
                      na="NA")

smoke_1
```

```{r}
smoke_2 <- read_excel('data/smoke_2.xlsx', 
                      sheet=1, 
                      na="NA")

smoke_2
```

```{r}
smoke_3 <- read_excel('data/smoke_3.xlsx', 
                      sheet=1, 
                      na="NA")

smoke_3
```

Maybe you want to create some figures to show the overall demographics of your dataset, maybe you want to check for batch effects between sites, or maybe you want to create some powerful machine learning models. How can you combine  datasets from individual labs? Enter `bind_rows()`...

```{r}
smoke_1 %>% bind_rows(smoke_2)
```


`bind_rows()` allows you to append one dataset to another. We can see that `smoke_1` contained 549 rows and `smoke_2` contained 603 rows. After using `bind_rows()`, we now have a single dataset containing 1152 rows.

That's all pretty cool, until you meet a rogue lab. This lab almost seems as if they've gone out of their way to make things difficult. Rather than putting columns in the standard order specified, they've switched them around. Even worse, they've named the columns differently! If there are only a few columns, sure, we could manually fix this. But what if this was RNASeq data, with thousands of column names to fix?!

Well, let's remember we still have `clean_names()`. That can at least help us get the column names into the standard format.

```{r}
smoke_3_clean <- smoke_3 %>%
    clean_names()
```

Our column names are at least the same, but they're still out of order! If we append `smoke_3_clean` to `smoke_1`, `vital_status` will be appened under `primary_diagnosis`, `age_at_diagnosis` will be appended under `tumor_stage`, and so on. Do we need to reorder the columns before we append them?

```{r}
smoke_1 %>%
    bind_rows(smoke_3_clean) %>%
    View()
```

Well look at that. `bind_rows()` takes care of the out-of-order columns for us!
